import { useSettingsStore } from './stores/settingsStore';
import type { Language } from './stores/settingsStore';

type TranslationValue = string | TranslationDict;
interface TranslationDict {
  [key: string]: TranslationValue;
}
export type TranslationKey = string;

const baseTranslations: TranslationDict = {
  settings_title: 'Einstellungen',
  tab_widgets: 'Widgets',
  tab_stocks: 'Aktien',
  tab_pomodoro: 'Pomodoro',
  tab_general: 'Allgemein',
  tab_clock: 'Uhr',
  tab_language: 'Sprache',
  tab_news: 'News',
  tab_weather: 'Wetter',
  tab_calendar: 'Kalender',
  tab_layouts: 'Layouts',
  widgets_description: 'Aktiviere oder deaktiviere Widgets im Dashboard.',
  widget_clock: 'Uhrzeit & Datum',
  widget_systemPet: 'Minty',
  widget_musicPlayer: 'Musik',
  widget_ambientSound: 'Ambient Sounds',
  widget_upcoming: 'Anstehend',
  widget_rabbitHole: 'Rabbit Hole',
  widget_news: 'Nachrichten',
  widget_weather: 'Wetter',
  widget_calendar: 'Kalender',
  widget_tasks: 'Tasks & Notizen',
  widget_system: 'System-Metriken',
  widget_pomodoro: 'Pomodoro Timer',
  stocks_description: 'Verwalte deine Aktien-Watchlist.',
  stocks_placeholder: 'Symbol (z.B. AAPL)',
  stocks_add: 'Hinzuf√ºgen',
  stocks_interval_label: 'Aktualisierungsintervall (Sekunden)',
  stocks_interval_hint: 'H√∂heres Intervall reduziert Rate-Limits. Empfohlen: 120s+',
  stocks_empty: 'Keine Aktien konfiguriert',
  stocks_empty_watchlist: 'Keine Aktien in der Watchlist',
  stocks_loading: 'Lade Kurse...',
  stocks_error: 'Fehler beim Laden der Kurse',
  stocks_using_cache: 'Zwischengespeicherte Kurse',
  stocks_using_fallback: 'Fallback-Daten (offline)',
  stocks_retry_in: 'N√§chster Versuch in',
  stocks_last_updated: 'Zuletzt aktualisiert',
  stocks_as_of: 'Stand',
  stocks_refresh: 'Aktualisieren',
  layouts_description: 'Speichere und lade Dashboard-Layouts lokal. √Ñnderungen werden nicht online gespeichert.',
  layouts_save: 'Speichern',
  layouts_load: 'Laden',
  layouts_delete: 'L√∂schen',
  layouts_refresh: 'Aktualisieren',
  layouts_export: 'Exportieren',
  layouts_export_ready: 'Export bereit (Text unten kopieren)',
  layouts_exported: 'In Zwischenablage kopiert',
  layouts_import: 'Importieren',
  layouts_import_placeholder: 'JSON-Layout hier einf√ºgen',
  layouts_import_error: 'Import fehlgeschlagen ‚Äì g√ºltiges JSON n√∂tig',
  layouts_imported: 'Layout importiert',
  layouts_name_placeholder: 'Layout-Name',
  layouts_none: 'Keine Layouts gespeichert',
  layouts_current_layout: 'Aktuelles Layout',
  layouts_saved_success: 'Layout gespeichert',
  layouts_loaded_success: 'Layout geladen',
  layouts_deleted_success: 'Layout gel√∂scht',
  layouts_select_prompt: 'Bitte ein Layout ausw√§hlen',
  layouts_load_error: 'Layout konnte nicht geladen werden',
  theme_label: 'Theme',
  theme_dark: 'Dunkel',
  theme_light: 'Hell',
  language_label: 'Sprache',
  language_german: 'Deutsch',
  language_english: 'Englisch',
  language_spanish: 'Spanisch',
  language_serbo_croatian: 'Serbokroatisch',
  pomodoro_tab_description: 'Passe die Pomodoro-Timer Einstellungen an.',
  pomodoro_work: 'Arbeitszeit (Min)',
  pomodoro_break: 'Pause (Min)',
  pomodoro_long_break: 'Lange Pause (Min)',
  pomodoro_sessions_until_long: 'Sessions bis lange Pause',
  pomodoro_phase_label: 'Phase',
  pomodoro_phase_work: 'Fokus',
  pomodoro_phase_short_break: 'Kurz-Pause',
  pomodoro_phase_long_break: 'Lange Pause',
  pomodoro_start: 'Start',
  pomodoro_pause: 'Pause',
  pomodoro_reset: 'Reset',
  pomodoro_progress: 'Fortschritt',
  pomodoro_today: 'Heute',
  pomodoro_sessions_word: 'Sessions',
  pomodoro_minty_work: 'Minty: Lass uns Gas geben!',
  pomodoro_minty_break: 'Minty: Zeit zum Durchatmen üçÉ',
  settings_button_tooltip: 'Einstellungen',
  connection_connected: 'Verbunden',
  connection_disconnected: 'Getrennt',
  loading_config: 'Konfiguration wird geladen...',
  timeline_of_day: 'des Tages',
  timeline_remaining: 'verbleibend',
  memento_mori: 'Memento Mori',
  memento_mori_toggle: 'Memento Mori anzeigen',
  memento_mori_hint: 'Zeigt einen kleinen Reminder am Ende der Tagesleiste.',
  clock_size_label: 'Uhrgr√∂√üe',
  layout_mode_label: 'Layout-Modus',
  layout_mode_auto: 'Auto',
  layout_mode_manual: 'Manuell',
  layout_mode_auto_hint: 'Automatische Erkennung aktiv ({profile})',
  layout_mode_manual_hint: 'W√§hle ein Layout-Profil unabh√§ngig von der Bildschirmbreite.',
  layout_profile_label: 'Layout-Profil',
  layout_profile_compact: 'Kompakt',
  layout_profile_standard: 'Standard',
  layout_profile_ultrawide: 'Ultrawide',
  rabbitHole: {
    title: 'Rabbit Hole',
    button: 'Ins Rabbit Hole springen',
    description: 'Klicke auf den Button um in den Rabbit Hole zu springen!',
    loading: 'Lade zuf√§lligen Artikel...',
    error: 'Konnte keinen Artikel laden',
    history: 'Verlauf',
    historyEmpty: 'Kein Verlauf vorhanden',
    historyClear: 'Verlauf l√∂schen',
    readMore: 'Mehr lesen',
    noDescription: 'Keine Beschreibung verf√ºgbar.',
    unknownTitle: 'Unbekannt',
  },
  system_core: 'Kern',
  system_download: 'Download',
  system_upload: 'Upload',
  system_loading: 'Lade Metriken...',
  system_connecting: 'Verbinde mit Backend...',
  system_cpu: 'CPU',
  system_memory: 'RAM',
  system_disk: 'Speicher',
  system_network: 'Netzwerk',
  system_uptime: 'Betriebszeit',
  ambient_sound_rain: 'Regen',
  ambient_sound_forest: 'Wald',
  ambient_sound_cafe: 'Caf√©',
  ambient_sound_fireplace: 'Kamin',
  ambient_sound_ocean: 'Ozean',
  ambient_sound_wind: 'Wind',
  ambient_sound_thunder: 'Gewitter',
  ambient_sound_whitenoise: 'Rauschen',
  ambient_active_count: 'Aktiv: {count}',
  ambient_none_active: 'Keine aktiv',
  ambient_stop_all: 'Alle stoppen',
  ambient_file_missing: 'Datei nicht gefunden',
  ambient_mixer: 'Mixer',
  ambient_add_files_hint: 'F√ºge .mp3-Dateien in',
  upcoming_loading: 'L√§dt...',
  upcoming_tab_upcoming: 'Kommend',
  upcoming_tab_past: 'Vergangen',
  upcoming_title_placeholder: 'Titel',
  upcoming_url_placeholder: 'URL (optional)',
  upcoming_cancel: 'Abbrechen',
  upcoming_save: 'Speichern',
  upcoming_add: 'Hinzuf√ºgen',
  upcoming_empty_past: 'Keine vergangenen Eintr√§ge',
  upcoming_empty_upcoming: 'Keine kommenden Eintr√§ge',
  upcoming_category_tech: 'Tech',
  upcoming_category_gaming: 'Gaming',
  upcoming_category_entertainment: 'Entertainment',
  upcoming_category_finance: 'Finance',
  upcoming_category_personal: 'Pers√∂nlich',
  news_loading: 'Lade Nachrichten...',
  news_error: 'Fehler beim Laden der Nachrichten',
  news_empty: 'Keine Artikel',
  news_settings_description: 'Verwalte News-Quellen, Breite und Reihenfolge.',
  news_colspan: 'Spalten',
  news_no_feeds: 'Keine News-Quellen konfiguriert.',
  news_add_feed: 'Quelle hinzuf√ºgen',
  news_feed_name: 'Name',
  news_feed_url: 'Feed-URL',
  news_feed_icon: 'Icon',
  news_feed_id: 'ID',
  news_enabled: 'Aktiv',
  news_move_up: 'Nach oben',
  news_move_down: 'Nach unten',
  news_delete: 'Entfernen',
  news_save: 'Speichern',
  news_saving: 'Speichere...',
  news_save_success: 'News-Quellen gespeichert',
  news_test_feed: 'Quelle testen',
  news_test_success: 'Feed erfolgreich getestet',
  news_validation_required: 'Name und URL sind erforderlich',
  news_validation_url: 'URL angeben',
  news_validation_duplicate: 'IDs m√ºssen eindeutig sein',
  weather_loading: 'Lade Wetter...',
  weather_error: 'Wetter konnte nicht geladen werden',
  weather_no_data: 'Keine Daten',
  weather_feels_like: 'Gef√ºhlt',
  weather_humidity: 'Luftfeuchte',
  weather_wind: 'Wind',
  weather_rain: 'Regen',
  weather_unknown_error: 'Unbekannter Fehler',
  weather_settings_description: 'Lege die Koordinaten f√ºr das Wetter-Widget fest.',
  weather_settings_latitude: 'Breitengrad (Latitude)',
  weather_settings_longitude: 'L√§ngengrad (Longitude)',
  weather_settings_location: 'Ort',
  weather_settings_location_placeholder: 'z.B. Wien',
  weather_settings_unit: 'Einheit',
  weather_settings_unit_c: 'Celsius (¬∞C)',
  weather_settings_unit_f: 'Fahrenheit (¬∞F)',
  weather_location_missing: 'Ort nicht gesetzt',
  weather_settings_save: 'Speichern',
  weather_settings_test: 'Testen',
  weather_settings_testing: 'Teste...',
  weather_settings_saved: 'Gespeichert',
  weather_settings_invalid: 'Bitte g√ºltige Koordinaten eingeben',
  weather_settings_test_success: 'Wetterdaten geladen',
  tasks_loading: 'Lade Daten...',
  tasks_placeholder: 'Neue Aufgabe...',
  tasks_add: 'Hinzuf√ºgen',
  tasks_empty: 'Keine offenen Tasks.',
  tasks_delete: 'L√∂schen',
  tasks_error_loading: 'Aufgaben/Notizen konnten nicht geladen werden',
  tasks_error_generic: 'Aktion fehlgeschlagen',
  notes_placeholder: 'Schnellnotiz...',
  notes_save: 'Speichern',
  notes_empty: 'Keine Notizen.',
  notes_delete: 'L√∂schen',
  calendar_loading: 'Lade Termine...',
  calendar_error: 'Kalender konnte nicht geladen werden',
  calendar_empty: 'Keine Termine in den n√§chsten Tagen.',
  calendar_event_count: 'Termin(e)',
  calendar_all_day: 'Ganzt√§gig',
  calendar_settings_description: 'W√§hle, an welchem Tag die Woche startet.',
  calendar_week_start_label: 'Erster Tag der Woche',
  calendar_week_start_monday: 'Montag',
  calendar_week_start_sunday: 'Sonntag',
  restart_title: 'Neustart',
  restart_backend: 'Backend neu starten',
  restart_frontend: 'Frontend neu laden',
  restart_running: 'Starte neu...',
  restart_failed: 'Neustart fehlgeschlagen',
  restart_hint: 'Startet den Server-Prozess neu und l√§dt die Seite neu.',
  widget_pin: 'Anpinnen',
  widget_unpin: 'L√∂sen',
  transparency_mode_title: 'Transparenz-Modus',
  transparency_mode_hint: 'Schalte aus f√ºr volle Deckkraft. Schalte ein f√ºr echte Alpha-Transparenz.',
  transparency_on: 'An',
  transparency_off: 'Aus',
  transparency_title: 'Hintergrund-Transparenz',
  transparency_hint: '0% = vollst√§ndig transparent, 100% = vollst√§ndig opak',
  transparency_widget_title: 'Widget-Transparenz',
  transparency_widget_hint: '0% = komplett durchsichtig, 100% = voll opak',
};

const translations: Record<Language, Partial<TranslationDict>> = {
  de: baseTranslations,
  en: {
    settings_title: 'Settings',
    tab_widgets: 'Widgets',
    tab_stocks: 'Stocks',
    tab_pomodoro: 'Pomodoro',
    tab_general: 'General',
    tab_clock: 'Clock',
    tab_language: 'Language',
    tab_news: 'News',
    tab_weather: 'Weather',
    tab_calendar: 'Calendar',
    tab_layouts: 'Layouts',
    widgets_description: 'Enable or disable dashboard widgets.',
    widget_clock: 'Time & Date',
    widget_systemPet: 'Minty',
    widget_musicPlayer: 'Music',
    widget_ambientSound: 'Ambient Sounds',
    widget_upcoming: 'Upcoming',
    widget_rabbitHole: 'Rabbit Hole',
    widget_news: 'News',
    widget_weather: 'Weather',
    widget_calendar: 'Calendar',
    widget_tasks: 'Tasks & Notes',
    widget_system: 'System Metrics',
    widget_pomodoro: 'Pomodoro Timer',
    stocks_description: 'Manage your stock watchlist.',
    stocks_placeholder: 'Symbol (e.g. AAPL)',
    stocks_add: 'Add',
    stocks_interval_label: 'Update interval (seconds)',
    stocks_interval_hint: 'Higher intervals reduce rate limits. Recommended: 120s+',
    stocks_empty: 'No stocks configured',
    stocks_empty_watchlist: 'No stocks in your watchlist',
    stocks_loading: 'Loading quotes...',
    stocks_error: 'Failed to load quotes',
    stocks_using_cache: 'Showing cached quotes',
    stocks_using_fallback: 'Showing fallback data (offline)',
    stocks_retry_in: 'Retrying in',
    stocks_last_updated: 'Last updated',
    stocks_as_of: 'As of',
    stocks_refresh: 'Refresh',
    layouts_description: 'Save and load dashboard layouts locally. Nothing is stored online.',
    layouts_save: 'Save',
    layouts_load: 'Load',
    layouts_delete: 'Delete',
    layouts_refresh: 'Refresh',
    layouts_export: 'Export',
    layouts_export_ready: 'Export ready (copy text below)',
    layouts_exported: 'Copied to clipboard',
    layouts_import: 'Import',
    layouts_import_placeholder: 'Paste layout JSON here',
    layouts_import_error: 'Import failed ‚Äì provide valid JSON',
    layouts_imported: 'Layout imported',
    layouts_name_placeholder: 'Layout name',
    layouts_none: 'No layouts saved',
    layouts_current_layout: 'Current layout',
    layouts_saved_success: 'Layout saved',
    layouts_loaded_success: 'Layout loaded',
    layouts_deleted_success: 'Layout deleted',
    layouts_select_prompt: 'Select a layout first',
    layouts_load_error: 'Layout could not be loaded',
    theme_label: 'Theme',
    theme_dark: 'Dark',
    theme_light: 'Light',
    language_label: 'Language',
    language_german: 'German',
    language_english: 'English',
    language_spanish: 'Spanish',
    language_serbo_croatian: 'Serbo-Croatian',
    pomodoro_tab_description: 'Adjust your Pomodoro timer settings.',
    pomodoro_work: 'Work duration (min)',
    pomodoro_break: 'Break (min)',
    pomodoro_long_break: 'Long break (min)',
    pomodoro_sessions_until_long: 'Sessions until long break',
    pomodoro_phase_label: 'Phase',
    pomodoro_phase_work: 'Focus',
    pomodoro_phase_short_break: 'Short break',
    pomodoro_phase_long_break: 'Long break',
    pomodoro_start: 'Start',
    pomodoro_pause: 'Pause',
    pomodoro_reset: 'Reset',
    pomodoro_progress: 'Progress',
    pomodoro_today: 'Today',
    pomodoro_sessions_word: 'sessions',
    pomodoro_minty_work: 'Minty: Let‚Äôs go!',
    pomodoro_minty_break: 'Minty: Time to breathe üçÉ',
    settings_button_tooltip: 'Settings',
    connection_connected: 'Connected',
    connection_disconnected: 'Disconnected',
    loading_config: 'Loading configuration...',
    timeline_of_day: 'of the day',
    timeline_remaining: 'remaining',
    system_core: 'Core',
    system_download: 'Download',
    system_upload: 'Upload',
    system_loading: 'Loading metrics...',
    system_connecting: 'Connecting to backend...',
    system_cpu: 'CPU',
    system_memory: 'Memory',
    system_disk: 'Disk',
    system_network: 'Network',
    system_uptime: 'Uptime',
    ambient_sound_rain: 'Rain',
    ambient_sound_forest: 'Forest',
    ambient_sound_cafe: 'Cafe',
    ambient_sound_fireplace: 'Fireplace',
    ambient_sound_ocean: 'Ocean',
    ambient_sound_wind: 'Wind',
    ambient_sound_thunder: 'Thunderstorm',
    ambient_sound_whitenoise: 'White noise',
    ambient_active_count: 'Active: {count}',
    ambient_none_active: 'None active',
    ambient_stop_all: 'Stop all',
    ambient_file_missing: 'File not found',
    ambient_mixer: 'Mixer',
    ambient_add_files_hint: 'Add .mp3 files to',
    upcoming_loading: 'Loading...',
    upcoming_tab_upcoming: 'Upcoming',
    upcoming_tab_past: 'Past',
    upcoming_title_placeholder: 'Title',
    upcoming_url_placeholder: 'URL (optional)',
    upcoming_cancel: 'Cancel',
    upcoming_save: 'Save',
    upcoming_add: 'Add',
    upcoming_empty_past: 'No past entries',
    upcoming_empty_upcoming: 'No upcoming entries',
    upcoming_category_tech: 'Tech',
    upcoming_category_gaming: 'Gaming',
    upcoming_category_entertainment: 'Entertainment',
    upcoming_category_finance: 'Finance',
    upcoming_category_personal: 'Personal',
    news_loading: 'Loading news...',
    news_error: 'Failed to load news',
    news_empty: 'No articles',
    news_settings_description: 'Manage news sources, width, and order.',
    news_colspan: 'Columns',
    news_no_feeds: 'No news sources configured.',
    news_add_feed: 'Add source',
    news_feed_name: 'Name',
    news_feed_url: 'Feed URL',
    news_feed_icon: 'Icon',
    news_feed_id: 'ID',
    news_enabled: 'Enabled',
    news_move_up: 'Move up',
    news_move_down: 'Move down',
    news_delete: 'Remove',
    news_save: 'Save',
    news_saving: 'Saving...',
    news_save_success: 'News sources saved',
    news_test_feed: 'Test source',
    news_test_success: 'Feed tested successfully',
    news_validation_required: 'Name and URL are required',
    news_validation_url: 'Please provide a URL',
    news_validation_duplicate: 'IDs must be unique',
    weather_loading: 'Loading weather...',
    weather_error: 'Failed to load weather',
    weather_no_data: 'No data',
    weather_feels_like: 'Feels like',
    weather_humidity: 'Humidity',
    weather_wind: 'Wind',
    weather_rain: 'Rain',
    weather_unknown_error: 'Unknown error',
    weather_settings_description: 'Set the coordinates for the weather widget.',
    weather_settings_latitude: 'Latitude',
    weather_settings_longitude: 'Longitude',
    weather_settings_location: 'Location',
    weather_settings_location_placeholder: 'e.g. Vienna',
    weather_settings_unit: 'Units',
    weather_settings_unit_c: 'Celsius (¬∞C)',
    weather_settings_unit_f: 'Fahrenheit (¬∞F)',
    weather_location_missing: 'Location not set',
    weather_settings_save: 'Save',
    weather_settings_test: 'Test',
    weather_settings_testing: 'Testing...',
    weather_settings_saved: 'Saved',
    weather_settings_invalid: 'Please enter valid coordinates',
    weather_settings_test_success: 'Weather data loaded',
    tasks_loading: 'Loading...',
    tasks_placeholder: 'New task...',
    tasks_add: 'Add',
    tasks_empty: 'No open tasks.',
    tasks_delete: 'Delete',
    tasks_error_loading: 'Failed to load tasks/notes',
    tasks_error_generic: 'Action failed',
    notes_placeholder: 'Quick note...',
    notes_save: 'Save',
    notes_empty: 'No notes.',
    notes_delete: 'Delete',
    calendar_loading: 'Loading events...',
    calendar_error: 'Failed to load calendar',
    calendar_empty: 'No events in the next days.',
    calendar_event_count: 'event(s)',
    calendar_all_day: 'All day',
    calendar_settings_description: 'Choose which day the week starts on.',
    calendar_week_start_label: 'First day of the week',
    calendar_week_start_monday: 'Monday',
    calendar_week_start_sunday: 'Sunday',
    restart_title: 'Restart',
    restart_backend: 'Restart backend',
    restart_frontend: 'Reload frontend',
    restart_running: 'Restarting...',
    restart_failed: 'Restart failed',
    restart_hint: 'Restarts the server process and reloads the page.',
    widget_pin: 'Pin',
    widget_unpin: 'Unpin',
    clock_size_label: 'Clock size',
    memento_mori: 'Memento Mori',
    memento_mori_toggle: 'Show "Memento Mori"',
    memento_mori_hint: 'Adds a small reminder at the end of the timeline.',
    layout_mode_label: 'Layout mode',
    layout_mode_auto: 'Auto',
    layout_mode_manual: 'Manual',
    layout_mode_auto_hint: 'Auto-detected ({profile})',
    layout_mode_manual_hint: 'Manually choose a layout profile regardless of screen width.',
    layout_profile_label: 'Layout profile',
    layout_profile_compact: 'Compact',
    layout_profile_standard: 'Standard',
    layout_profile_ultrawide: 'Ultrawide',
    transparency_mode_title: 'Transparency Mode',
    transparency_mode_hint: 'Turn off for fully opaque widgets/background. Turn on for real alpha transparency.',
    transparency_on: 'On',
    transparency_off: 'Off',
    transparency_hint: '0% = fully transparent, 100% = fully opaque',
    transparency_widget_title: 'Widget Transparency',
    transparency_widget_hint: '0% = fully transparent widgets, 100% = fully opaque',
    transparency_title: 'Background Transparency',
    rabbitHole: {
      title: 'Rabbit Hole',
      button: 'Jump into a Rabbit Hole',
      description: 'Click the button to jump into the Rabbit Hole!',
      loading: 'Loading random article...',
      error: 'Could not load article',
      history: 'History',
      historyEmpty: 'No history yet',
      historyClear: 'Clear history',
      readMore: 'Read more',
      noDescription: 'No description available.',
      unknownTitle: 'Unknown',
    },
  },
  es: {
    settings_title: 'Ajustes',
    tab_widgets: 'Widgets',
    tab_stocks: 'Acciones',
    tab_pomodoro: 'Pomodoro',
    tab_general: 'General',
    tab_clock: 'Reloj',
    tab_language: 'Idioma',
    tab_news: 'Noticias',
    tab_weather: 'Clima',
    tab_calendar: 'Calendario',
    tab_layouts: 'Layouts',
    widgets_description: 'Activa o desactiva widgets del panel.',
    widget_clock: 'Hora y fecha',
    widget_systemPet: 'Minty',
    widget_musicPlayer: 'M√∫sica',
    widget_ambientSound: 'Sonidos ambiente',
    widget_upcoming: 'Pr√≥ximos',
    widget_rabbitHole: 'Rabbit Hole',
    widget_news: 'Noticias',
    widget_weather: 'Tiempo',
    widget_calendar: 'Calendario',
    widget_tasks: 'Tareas y notas',
    widget_system: 'M√©tricas del sistema',
    widget_pomodoro: 'Temporizador Pomodoro',
    stocks_description: 'Gestiona tu lista de seguimiento.',
    stocks_placeholder: 'S√≠mbolo (p.ej. AAPL)',
    stocks_add: 'A√±adir',
    stocks_interval_label: 'Intervalo de actualizaci√≥n (segundos)',
    stocks_interval_hint: 'Un intervalo mayor evita l√≠mites de uso. Recomendado: 120s+',
    stocks_empty: 'No hay acciones configuradas',
    stocks_empty_watchlist: 'Ninguna acci√≥n en la lista',
    stocks_loading: 'Cargando cotizaciones...',
    stocks_error: 'Error al cargar cotizaciones',
    stocks_using_cache: 'Mostrando datos en cach√©',
    stocks_using_fallback: 'Mostrando datos alternativos (offline)',
    stocks_retry_in: 'Reintentando en',
    stocks_last_updated: '√öltima actualizaci√≥n',
    stocks_as_of: 'Actualizado',
    stocks_refresh: 'Actualizar',
    layouts_description: 'Guarda y carga los layouts del panel de forma local. No se guardan en l√≠nea.',
    layouts_save: 'Guardar',
    layouts_load: 'Cargar',
    layouts_delete: 'Eliminar',
    layouts_refresh: 'Actualizar',
    layouts_export: 'Exportar',
    layouts_export_ready: 'Export listo (copia el texto de abajo)',
    layouts_exported: 'Copiado al portapapeles',
    layouts_import: 'Importar',
    layouts_import_placeholder: 'Pega aqu√≠ el JSON del layout',
    layouts_import_error: 'Error al importar: JSON no v√°lido',
    layouts_imported: 'Layout importado',
    layouts_name_placeholder: 'Nombre del layout',
    layouts_none: 'No hay layouts guardados',
    layouts_current_layout: 'Layout actual',
    layouts_saved_success: 'Layout guardado',
    layouts_loaded_success: 'Layout cargado',
    layouts_deleted_success: 'Layout eliminado',
    layouts_select_prompt: 'Selecciona un layout primero',
    layouts_load_error: 'No se pudo cargar el layout',
    theme_label: 'Tema',
    theme_dark: 'Oscuro',
    theme_light: 'Claro',
    language_label: 'Idioma',
    language_german: 'Alem√°n',
    language_english: 'Ingl√©s',
    language_spanish: 'Espa√±ol',
    language_serbo_croatian: 'Serbocroata',
    pomodoro_tab_description: 'Ajusta el temporizador Pomodoro.',
    pomodoro_work: 'Trabajo (min)',
    pomodoro_break: 'Pausa (min)',
    pomodoro_long_break: 'Pausa larga (min)',
    pomodoro_sessions_until_long: 'Sesiones hasta pausa larga',
    pomodoro_phase_label: 'Fase',
    pomodoro_phase_work: 'Foco',
    pomodoro_phase_short_break: 'Pausa corta',
    pomodoro_phase_long_break: 'Pausa larga',
    pomodoro_start: 'Iniciar',
    pomodoro_pause: 'Pausar',
    pomodoro_reset: 'Reiniciar',
    pomodoro_progress: 'Progreso',
    pomodoro_today: 'Hoy',
    pomodoro_sessions_word: 'sesiones',
    pomodoro_minty_work: 'Minty: ¬°Vamos!',
    pomodoro_minty_break: 'Minty: Hora de respirar üçÉ',
    settings_button_tooltip: 'Ajustes',
    connection_connected: 'Conectado',
    connection_disconnected: 'Desconectado',
    loading_config: 'Cargando configuraci√≥n...',
    timeline_of_day: 'del dia',
    timeline_remaining: 'restante',
    system_core: 'N√∫cleo',
    system_download: 'Descarga',
    system_upload: 'Subida',
    system_loading: 'Cargando m√©tricas...',
    system_connecting: 'Conectando con el backend...',
    system_cpu: 'CPU',
    system_memory: 'Memoria',
    system_disk: 'Disco',
    system_network: 'Red',
    system_uptime: 'Tiempo activo',
    ambient_sound_rain: 'Lluvia',
    ambient_sound_forest: 'Bosque',
    ambient_sound_cafe: 'Caf√©',
    ambient_sound_fireplace: 'Chimenea',
    ambient_sound_ocean: 'Oc√©ano',
    ambient_sound_wind: 'Viento',
    ambient_sound_thunder: 'Tormenta',
    ambient_sound_whitenoise: 'Ruido blanco',
    ambient_active_count: 'Activos: {count}',
    ambient_none_active: 'Ninguno activo',
    ambient_stop_all: 'Detener todo',
    ambient_file_missing: 'Archivo no encontrado',
    ambient_mixer: 'Mezclador',
    ambient_add_files_hint: 'Agrega archivos .mp3 en',
    upcoming_loading: 'Cargando...',
    upcoming_tab_upcoming: 'Pr√≥ximos',
    upcoming_tab_past: 'Pasados',
    upcoming_title_placeholder: 'T√≠tulo',
    upcoming_url_placeholder: 'URL (opcional)',
    upcoming_cancel: 'Cancelar',
    upcoming_save: 'Guardar',
    upcoming_add: 'A√±adir',
    upcoming_empty_past: 'Sin entradas pasadas',
    upcoming_empty_upcoming: 'Sin entradas pr√≥ximas',
    upcoming_category_tech: 'Tecnolog√≠a',
    upcoming_category_gaming: 'Videojuegos',
    upcoming_category_entertainment: 'Entretenimiento',
    upcoming_category_finance: 'Finanzas',
    upcoming_category_personal: 'Personal',
    news_loading: 'Cargando noticias...',
    news_error: 'Error al cargar noticias',
    news_empty: 'Sin art√≠culos',
    news_settings_description: 'Gestiona fuentes, anchos y orden.',
    news_colspan: 'Columnas',
    news_no_feeds: 'No hay fuentes de noticias configuradas.',
    news_add_feed: 'Agregar fuente',
    news_feed_name: 'Nombre',
    news_feed_url: 'URL del feed',
    news_feed_icon: 'Icono',
    news_feed_id: 'ID',
    news_enabled: 'Activa',
    news_move_up: 'Subir',
    news_move_down: 'Bajar',
    news_delete: 'Eliminar',
    news_save: 'Guardar',
    news_saving: 'Guardando...',
    news_save_success: 'Fuentes guardadas',
    news_test_feed: 'Probar fuente',
    news_test_success: 'Feed probado correctamente',
    news_validation_required: 'Nombre y URL son obligatorios',
    news_validation_url: 'Indica una URL',
    news_validation_duplicate: 'Las IDs deben ser √∫nicas',
    weather_loading: 'Cargando el tiempo...',
    weather_error: 'No se pudo cargar el tiempo',
    weather_no_data: 'Sin datos',
    weather_feels_like: 'Sensaci√≥n',
    weather_humidity: 'Humedad',
    weather_wind: 'Viento',
    weather_rain: 'Lluvia',
    weather_unknown_error: 'Error desconocido',
    weather_settings_description: 'Configura las coordenadas del widget del clima.',
    weather_settings_latitude: 'Latitud',
    weather_settings_longitude: 'Longitud',
    weather_settings_location: 'Ubicaci√≥n',
    weather_settings_location_placeholder: 'p. ej. Viena',
    weather_settings_unit: 'Unidad',
    weather_settings_unit_c: 'Celsius (¬∞C)',
    weather_settings_unit_f: 'Fahrenheit (¬∞F)',
    weather_location_missing: 'Ubicaci√≥n no configurada',
    weather_settings_save: 'Guardar',
    weather_settings_test: 'Probar',
    weather_settings_testing: 'Probando...',
    weather_settings_saved: 'Guardado',
    weather_settings_invalid: 'Introduce coordenadas v√°lidas',
    weather_settings_test_success: 'Datos del clima cargados',
    tasks_loading: 'Cargando...',
    tasks_placeholder: 'Nueva tarea...',
    tasks_add: 'A√±adir',
    tasks_empty: 'No hay tareas abiertas.',
    tasks_delete: 'Eliminar',
    tasks_error_loading: 'No se pudieron cargar tareas/notas',
    tasks_error_generic: 'Acci√≥n fallida',
    notes_placeholder: 'Nota r√°pida...',
    notes_save: 'Guardar',
    notes_empty: 'Sin notas.',
    notes_delete: 'Eliminar',
    calendar_loading: 'Cargando eventos...',
    calendar_error: 'No se pudo cargar el calendario',
    calendar_empty: 'Sin eventos en los pr√≥ximos d√≠as.',
    calendar_event_count: 'evento(s)',
    calendar_all_day: 'Todo el d√≠a',
    calendar_settings_description: 'Elige el d√≠a en que comienza la semana.',
    calendar_week_start_label: 'Primer d√≠a de la semana',
    calendar_week_start_monday: 'Lunes',
    calendar_week_start_sunday: 'Domingo',
    restart_title: 'Reiniciar',
    restart_backend: 'Reiniciar backend',
    restart_frontend: 'Recargar frontend',
    restart_running: 'Reiniciando...',
    restart_failed: 'Fallo al reiniciar',
    restart_hint: 'Reinicia el proceso del servidor y recarga la p√°gina.',
    widget_pin: 'Fijar',
    widget_unpin: 'Soltar',
    clock_size_label: 'Tama√±o del reloj',
    memento_mori: 'Memento Mori',
    memento_mori_toggle: 'Mostrar "Memento Mori"',
    memento_mori_hint: 'A√±ade un recordatorio al final de la barra del d√≠a.',
    layout_mode_label: 'Modo de dise√±o',
    layout_mode_auto: 'Auto',
    layout_mode_manual: 'Manual',
    layout_mode_auto_hint: 'Detecci√≥n autom√°tica ({profile})',
    layout_mode_manual_hint: 'Elige un perfil de dise√±o sin depender del ancho de pantalla.',
    layout_profile_label: 'Perfil de dise√±o',
    layout_profile_compact: 'Compacto',
    layout_profile_standard: 'Est√°ndar',
    layout_profile_ultrawide: 'Ultrawide',
    transparency_mode_title: 'Modo de transparencia',
    transparency_mode_hint: 'Ap√°galo para opacidad total. Enci√©ndelo para transparencia real con alpha.',
    transparency_on: 'Activado',
    transparency_off: 'Desactivado',
    transparency_hint: '0% = totalmente transparente, 100% = totalmente opaco',
    transparency_widget_title: 'Transparencia de widgets',
    transparency_widget_hint: '0% = widgets totalmente transparentes, 100% = opacos',
    rabbitHole: {
      title: 'Madriguera',
      button: 'Saltar a la madriguera',
      description: '¬°Haz clic para descubrir algo nuevo!',
      loading: 'Cargando art√≠culo...',
      error: 'No se pudo cargar el art√≠culo',
      history: 'Historial',
      historyEmpty: 'Sin historial todav√≠a',
      historyClear: 'Borrar historial',
      readMore: 'Leer m√°s',
      noDescription: 'No hay descripci√≥n disponible.',
      unknownTitle: 'Desconocido',
    },
  },
  sr: {
    settings_title: 'Postavke',
    tab_widgets: 'Vid≈æeti',
    tab_stocks: 'Akcije',
    tab_pomodoro: 'Pomodoro',
    tab_general: 'Op≈°te',
    tab_clock: 'Sat',
    tab_language: 'Jezik',
    tab_news: 'Vesti',
    tab_weather: 'Vreme',
    tab_calendar: 'Kalendar',
    tab_layouts: 'Rasporedi',
    widgets_description: 'Ukljuƒçi ili iskljuƒçi vid≈æete na tabli.',
    widget_clock: 'Vreme i datum',
    widget_systemPet: 'Minty',
    widget_musicPlayer: 'Muzika',
    widget_ambientSound: 'Ambijentalni zvuci',
    widget_upcoming: 'Predstojeƒáe',
    widget_rabbitHole: 'Rabbit Hole',
    widget_news: 'Vesti',
    widget_weather: 'Vreme',
    widget_calendar: 'Kalendar',
    widget_tasks: 'Zadaci i bele≈°ke',
    widget_system: 'Sistemske metrike',
    widget_pomodoro: 'Pomodoro tajmer',
    stocks_description: 'Upravljaj listom akcija.',
    stocks_placeholder: 'Simbol (npr. AAPL)',
    stocks_add: 'Dodaj',
    stocks_interval_label: 'Interval osve≈æavanja (sekunde)',
    stocks_interval_hint: 'Veƒái interval smanjuje ograniƒçenja. Preporuka: 120s+',
    stocks_empty: 'Nema pode≈°enih akcija',
    stocks_empty_watchlist: 'Lista akcija je prazna',
    stocks_loading: 'Uƒçitavanje cena...',
    stocks_error: 'Gre≈°ka pri uƒçitavanju cena',
    stocks_using_cache: 'Prikaz ke≈°iranih cena',
    stocks_using_fallback: 'Prikaz rezervnih podataka (offline)',
    stocks_retry_in: 'Ponovni poku≈°aj za',
    stocks_last_updated: 'Poslednje osve≈æavanje',
    stocks_as_of: 'A≈æurirano',
    stocks_refresh: 'Osve≈æi',
    layouts_description: 'Saƒçuvaj i uƒçitaj rasporede table lokalno. Ni≈°ta se ne ≈°alje na mre≈æu.',
    layouts_save: 'Saƒçuvaj',
    layouts_load: 'Uƒçitaj',
    layouts_delete: 'Obri≈°i',
    layouts_refresh: 'Osve≈æi',
    layouts_export: 'Izvezi',
    layouts_export_ready: 'Izvoz spreman (kopiraj tekst ispod)',
    layouts_exported: 'Kopirano u privremenu memoriju',
    layouts_import: 'Uvezi',
    layouts_import_placeholder: 'Nalepi JSON rasporeda ovde',
    layouts_import_error: 'Uvoz neuspe≈°an ‚Äì neispravan JSON',
    layouts_imported: 'Raspored uvezen',
    layouts_name_placeholder: 'Naziv rasporeda',
    layouts_none: 'Nema saƒçuvanih rasporeda',
    layouts_current_layout: 'Trenutni raspored',
    layouts_saved_success: 'Raspored saƒçuvan',
    layouts_loaded_success: 'Raspored uƒçitan',
    layouts_deleted_success: 'Raspored obrisan',
    layouts_select_prompt: 'Izaberi raspored',
    layouts_load_error: 'Raspored nije moguƒáe uƒçitati',
    theme_label: 'Tema',
    theme_dark: 'Tamna',
    theme_light: 'Svetla',
    language_label: 'Jezik',
    language_german: 'Nemaƒçki',
    language_english: 'Engleski',
    language_spanish: '≈†panski',
    language_serbo_croatian: 'Srpsko-hrvatski',
    pomodoro_tab_description: 'Podesi Pomodoro tajmer.',
    pomodoro_work: 'Rad (min)',
    pomodoro_break: 'Pauza (min)',
    pomodoro_long_break: 'Duga pauza (min)',
    pomodoro_sessions_until_long: 'Sesije do duge pauze',
    pomodoro_phase_label: 'Faza',
    pomodoro_phase_work: 'Fokus',
    pomodoro_phase_short_break: 'Kratka pauza',
    pomodoro_phase_long_break: 'Duga pauza',
    pomodoro_start: 'Start',
    pomodoro_pause: 'Pauza',
    pomodoro_reset: 'Reset',
    pomodoro_progress: 'Napredak',
    pomodoro_today: 'Danas',
    pomodoro_sessions_word: 'sesije',
    pomodoro_minty_work: 'Minty: Ajmo!',
    pomodoro_minty_break: 'Minty: Vreme za predah üçÉ',
    settings_button_tooltip: 'Postavke',
    connection_connected: 'Povezano',
    connection_disconnected: 'Prekinuto',
    loading_config: 'Uƒçitavanje konfiguracije...',
    timeline_of_day: 'dana',
    timeline_remaining: 'preostalo',
    system_core: 'Jezgro',
    system_download: 'Preuzimanje',
    system_upload: 'Slanje',
    system_loading: 'Uƒçitavam metrike...',
    system_connecting: 'Povezujem se sa backendom...',
    system_cpu: 'CPU',
    system_memory: 'Memorija',
    system_disk: 'Disk',
    system_network: 'Mre≈æa',
    system_uptime: 'Vreme rada',
    ambient_sound_rain: 'Ki≈°a',
    ambient_sound_forest: '≈†uma',
    ambient_sound_cafe: 'Kafiƒá',
    ambient_sound_fireplace: 'Kamin',
    ambient_sound_ocean: 'Okean',
    ambient_sound_wind: 'Vetar',
    ambient_sound_thunder: 'Oluja',
    ambient_sound_whitenoise: 'Beli ≈°um',
    ambient_active_count: 'Aktivno: {count}',
    ambient_none_active: 'Ni≈°ta aktivno',
    ambient_stop_all: 'Zaustavi sve',
    ambient_file_missing: 'Fajl nije pronaƒëen',
    ambient_mixer: 'Mikser',
    ambient_add_files_hint: 'Dodaj .mp3 fajlove u',
    upcoming_loading: 'Uƒçitavanje...',
    upcoming_tab_upcoming: 'Predstojeƒáe',
    upcoming_tab_past: 'Pro≈°lo',
    upcoming_title_placeholder: 'Naslov',
    upcoming_url_placeholder: 'URL (opciono)',
    upcoming_cancel: 'Otka≈æi',
    upcoming_save: 'Saƒçuvaj',
    upcoming_add: 'Dodaj',
    upcoming_empty_past: 'Nema pro≈°lih unosa',
    upcoming_empty_upcoming: 'Nema predstojeƒáih unosa',
    upcoming_category_tech: 'Tehnologija',
    upcoming_category_gaming: 'Gejming',
    upcoming_category_entertainment: 'Zabava',
    upcoming_category_finance: 'Finansije',
    upcoming_category_personal: 'Liƒçno',
    news_loading: 'Uƒçitavanje vesti...',
    news_error: 'Gre≈°ka pri uƒçitavanju vesti',
    news_empty: 'Nema ƒçlanaka',
    news_settings_description: 'Upravljaj izvorima vesti, ≈°irinom i redosledom.',
    news_colspan: 'Kolone',
    news_no_feeds: 'Nema pode≈°enih izvora vesti.',
    news_add_feed: 'Dodaj izvor',
    news_feed_name: 'Naziv',
    news_feed_url: 'URL feed-a',
    news_feed_icon: 'Ikonica',
    news_feed_id: 'ID',
    news_enabled: 'Aktivan',
    news_move_up: 'Pomeri gore',
    news_move_down: 'Pomeri dole',
    news_delete: 'Ukloni',
    news_save: 'Saƒçuvaj',
    news_saving: 'ƒåuvam...',
    news_save_success: 'Izvori saƒçuvani',
    news_test_feed: 'Testiraj izvor',
    news_test_success: 'Feed uspe≈°no testiran',
    news_validation_required: 'Naziv i URL su obavezni',
    news_validation_url: 'Unesi URL',
    news_validation_duplicate: 'ID mora biti jedinstven',
    weather_loading: 'Uƒçitavanje vremena...',
    weather_error: 'Neuspe≈°no uƒçitavanje prognoze',
    weather_no_data: 'Nema podataka',
    weather_feels_like: 'Oseƒáa se kao',
    weather_humidity: 'Vla≈ænost',
    weather_wind: 'Vetar',
    weather_rain: 'Ki≈°a',
    weather_unknown_error: 'Nepoznata gre≈°ka',
    weather_settings_description: 'Podesi koordinate za vremenski widget.',
    weather_settings_latitude: 'Geografska ≈°irina',
    weather_settings_longitude: 'Geografska du≈æina',
    weather_settings_location: 'Lokacija',
    weather_settings_location_placeholder: 'npr. Beƒç',
    weather_settings_unit: 'Jedinica',
    weather_settings_unit_c: 'Celsius (¬∞C)',
    weather_settings_unit_f: 'Fahrenheit (¬∞F)',
    weather_location_missing: 'Lokacija nije pode≈°ena',
    weather_settings_save: 'Saƒçuvaj',
    weather_settings_test: 'Testiraj',
    weather_settings_testing: 'Testiram...',
    weather_settings_saved: 'Saƒçuvano',
    weather_settings_invalid: 'Unesi va≈æeƒáe koordinate',
    weather_settings_test_success: 'Podaci o vremenu uƒçitani',
    tasks_loading: 'Uƒçitavanje...',
    tasks_placeholder: 'Novi zadatak...',
    tasks_add: 'Dodaj',
    tasks_empty: 'Nema otvorenih zadataka.',
    tasks_delete: 'Obri≈°i',
    tasks_error_loading: 'Ne mogu da uƒçitam zadatke/bilje≈°ke',
    tasks_error_generic: 'Akcija neuspe≈°na',
    notes_placeholder: 'Brza bele≈°ka...',
    notes_save: 'Saƒçuvaj',
    notes_empty: 'Nema bele≈æaka.',
    notes_delete: 'Obri≈°i',
    calendar_loading: 'Uƒçitavanje dogaƒëaja...',
    calendar_error: 'Kalendarski podaci nisu dostupni',
    calendar_empty: 'Nema dogaƒëaja u narednim danima.',
    calendar_event_count: 'dogaƒëaj(a)',
    calendar_all_day: 'Ceo dan',
    calendar_settings_description: 'Izaberi dan kada poƒçinje nedelja.',
    calendar_week_start_label: 'Prvi dan u nedelji',
    calendar_week_start_monday: 'Ponedeljak',
    calendar_week_start_sunday: 'Nedelja',
    restart_title: 'Restart',
    restart_backend: 'Restartuj backend',
    restart_frontend: 'Osve≈æi frontend',
    restart_running: 'Restartujem...',
    restart_failed: 'Restart neuspe≈°an',
    restart_hint: 'Restartuje serverski proces i osve≈æava stranicu.',
    widget_pin: 'Zakaƒçi',
    widget_unpin: 'Otkaƒçi',
    clock_size_label: 'Veliƒçina sata',
    memento_mori: 'Memento Mori',
    memento_mori_toggle: 'Prika≈æi "Memento Mori"',
    memento_mori_hint: 'Dodaje mali podsetnik na kraj dnevne linije.',
    layout_mode_label: 'Re≈æim rasporeda',
    layout_mode_auto: 'Auto',
    layout_mode_manual: 'Ruƒçno',
    layout_mode_auto_hint: 'Automatska detekcija ({profile})',
    layout_mode_manual_hint: 'Ruƒçno izaberi profil rasporeda bez obzira na ≈°irinu ekrana.',
    layout_profile_label: 'Profil rasporeda',
    layout_profile_compact: 'Kompakt',
    layout_profile_standard: 'Standard',
    layout_profile_ultrawide: 'Ultrawide',
    transparency_mode_title: 'Re≈æim prozirnosti',
    transparency_mode_hint: 'Iskljuƒçi za punu neprozirnost. Ukljuƒçi za pravu alpha prozirnost.',
    transparency_on: 'Ukljuƒçeno',
    transparency_off: 'Iskljuƒçeno',
    transparency_hint: '0% = potpuno transparentno, 100% = potpuno neprozirno',
    transparency_widget_title: 'Transparentnost widgeta',
    transparency_widget_hint: '0% = potpuno prozirni widgeti, 100% = potpuno neprozirni',
    rabbitHole: {
      title: 'Zeƒçja rupa',
      button: 'Skoƒçi u zeƒçju rupu',
      description: 'Klikni da otkrije≈° ne≈°to novo!',
      loading: 'Uƒçitavanje ƒçlanka...',
      error: 'Nije moguƒáe uƒçitati ƒçlanak',
      history: 'Istorija',
      historyEmpty: 'Jo≈° nema istorije',
      historyClear: 'Obri≈°i istoriju',
      readMore: 'Proƒçitaj vi≈°e',
      noDescription: 'Nema opisa.',
      unknownTitle: 'Nepoznato',
    },
  },
};

function getNested(dict: TranslationDict | undefined, path: string): TranslationValue | undefined {
  if (!dict) return undefined;
  return path.split('.').reduce<TranslationValue | undefined>((acc, part) => {
    if (acc && typeof acc === 'object' && part in acc) {
      return (acc as TranslationDict)[part];
    }
    return undefined;
  }, dict);
}

export function translate(language: Language, key: TranslationKey): string {
  const fromLocale = getNested(translations[language] as TranslationDict, key);
  const fromBase = getNested(baseTranslations, key);
  const value = fromLocale ?? fromBase;
  return typeof value === 'string' ? value : key;
}

export function useTranslation() {
  const language = useSettingsStore((s) => s.general?.language ?? 'de');
  return {
    language,
    t: (key: TranslationKey) => translate(language, key),
  };
}

export function getLocale(language: Language): string {
  switch (language) {
    case 'en':
      return 'en-US';
    case 'es':
      return 'es-ES';
    case 'sr':
      return 'sr-Latn-RS';
    default:
      return 'de-DE';
  }
}
